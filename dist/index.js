"use strict";(()=>{var r=class{formatType(t){return t.join(", ")}formatYield(t){return`${t[0]} - ${t[1]}%`}formatArea(t){return`${t[0]} - ${t[1]}`}};var c=class extends r{constructor(){super(...arguments);this._parentElement=document.querySelector('[tentacle-listings-element="list"]');this._listingTemplateElement=this._parentElement.querySelector('[tentacle-listings-element="item"]');this._listingResultsElement=document.querySelector('[tentacle-listings-element="results"]');this._listingLoaderElement=document.querySelector('[tentacle-listings-element="loader"]')}renderListings(e){if(!this._parentElement)return;this._data=e;let n=this.getListingsLimit();n?this._data.slice(0,n).forEach(l=>{this._parentElement.append(this._generateListingMarkup(l))}):this._data.forEach(l=>{this._parentElement.append(this._generateListingMarkup(l))})}updateResultsElement(e){this._listingResultsElement&&(this._listingResultsElement.textContent=`(${e})`)}clear(){this._parentElement.innerHTML=""}getListingsLimit(){let e=this._parentElement.getAttribute("tentacle-listings-limit");if(e)return+e}_generateListingMarkup(e){if(!this._listingTemplateElement)return;let n=this._listingTemplateElement.cloneNode(!0),l=n.querySelector('[tentacle-listings-element="location"]'),s=n.querySelector('[tentacle-listings-element="type"]'),p=n.querySelector('[tentacle-listings-element="yield"]'),u=n.querySelector('[tentacle-listings-element="area"]');return n&&n.setAttribute("data-listing-id",e.id),l&&(l.textContent=e.location),s&&(s.textContent=this.formatType(e.type)),p&&e.yield&&(p.textContent=this.formatYield(e.yield)),u&&e.area&&(u.textContent=this.formatArea(e.area)),n}toggleLoader(){this._parentElement.classList.toggle("listing-1_list-is-loading"),this._listingLoaderElement.classList.toggle("listing-1_loader-is-loading"),this._listingResultsElement.classList.toggle("listing-1_results-count-loading")}addHandlerInit(e){window.addEventListener("load",function(n){e()})}addHandlerListingId(e){this._parentElement.addEventListener("click",function(n){var s;let l=n.target.closest("[tentacle-listings-element='item']");l&&e((s=l==null?void 0:l.dataset)==null?void 0:s.listingId)})}},a=new c;var d=class{constructor(){this._parentElement=document.querySelector('[tentacle-listing-element="list"]');this._modal=this._parentElement.closest('[tentacle-listing-element="modal"]');this._component=this._parentElement.closest('[tentacle-listing-element="component"]')}render(t){this._parentElement&&(this.data=t,this._populatePropMarkup(this.data))}showModal(){this._modal.style.display="flex",this._modal.style.opacity="1",this._component.style.display="block"}clear(){this._parentElement.innerHTML=""}_populatePropMarkup(t){let e=this._parentElement.querySelector('[tentacle-listing-element="location"]').lastChild,n=this._parentElement.querySelector('[tentacle-listing-element="type"]').lastChild,l=this._parentElement.querySelector('[tentacle-listing-element="yield"]').lastChild,s=this._parentElement.querySelector('[tentacle-listing-element="vacancy"]').lastChild;e&&t.location&&(e.textContent=t.location),n&&t.type&&(n.textContent=this.formatType(t.type)),l&&t.yield&&(l.textContent=this.formatYield(t.yield)),s&&t.vacancy&&(s.textContent=t.vacancy)}formatType(t){return t.join(", ")}formatYield(t){return`${t[0]} - ${t[1]}%`}formatArea(t){return`${t[0]} - ${t[1]}`}formatFirstUppercase(t){return t.charAt(0).toUpperCase()+t.slice(1)}},m=new d;var g="https://dev.tentacle.se/api/public-deals";var o={listings:[],resultsCount:"",activeListing:""},h=async function(){try{let i=await fetch(g,{headers:{referrer:"https://dev.tentacle.se","Content-Type":"application/javascript"}}),{data:t}=await i.json();t.forEach(e=>{let n=_(e);o.listings.push(n)}),o.resultsCount=y(t)}catch(i){console.error(i)}},y=function(i){return i.length},_=function(i){return{location:i.county,id:i.id,type:i.property_types,yield:i.yield_range,area:i.sqm_range,vacancy:i.vacancy}},f=function(i){let t=o.listings.find(e=>e.id===+i);if(!t)throw new Error("\u{1F4A5} Listing could not be found");return t};window.Webflow||(window.Webflow=[]);window.Webflow.push(()=>{let i=async function(){try{await h(),a.clear(),a.renderListings(o.listings),a.updateResultsElement(o.resultsCount),a.toggleLoader()}catch(n){console.log(n)}},t=function(n){let l=f(n);m.render(l),m.showModal()};function e(){a.addHandlerInit(i),a.addHandlerListingId(t)}e()});})();
