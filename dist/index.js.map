{
  "version": 3,
  "sources": ["../bin/live-reload.js", "../src/View.ts", "../src/listView.ts", "../src/modalView.ts", "../src/config.ts", "../src/model.ts", "../src/index.ts"],
  "sourcesContent": ["new EventSource(`${SERVE_ORIGIN}/esbuild`).addEventListener('change', () => location.reload());\n", "export default class View {\n  formatType(arr) {\n    return arr.join(', ');\n  }\n\n  formatYield(arr) {\n    return `${arr[0]} - ${arr[1]}%`;\n  }\n\n  formatArea(arr) {\n    return `${arr[0]} - ${arr[1]}`;\n  }\n}\n", "import View from './View';\n\nclass ListView extends View {\n  _data;\n  _parentElement = document.querySelector('[tentacle-listings-element=\"list\"]');\n  _listingTemplateElement = this._parentElement.querySelector('[tentacle-listings-element=\"item\"]');\n  _listingResultsElement = document.querySelector('[tentacle-listings-element=\"results\"]');\n  _listingLoaderElement = document.querySelector('[tentacle-listings-element=\"loader\"]');\n\n  renderListings(data) {\n    if (!this._parentElement) return;\n    this._data = data;\n\n    const limit = this.getListingsLimit();\n\n    limit\n      ? this._data.slice(0, limit).forEach((listing) => {\n          this._parentElement.append(this._generateListingMarkup(listing));\n        })\n      : this._data.forEach((listing) => {\n          this._parentElement.append(this._generateListingMarkup(listing));\n        });\n  }\n\n  updateResultsElement(count) {\n    if (!this._listingResultsElement) return;\n    this._listingResultsElement.textContent = `(${count})`;\n  }\n\n  clear() {\n    this._parentElement.innerHTML = '';\n  }\n\n  getListingsLimit() {\n    const limit = this._parentElement.getAttribute('tentacle-listings-limit');\n    if (!limit) return;\n    return +limit;\n  }\n\n  _generateListingMarkup(listing) {\n    if (!this._listingTemplateElement) return;\n    const listingElement = this._listingTemplateElement.cloneNode(true);\n\n    const locationText = listingElement.querySelector('[tentacle-listings-element=\"location\"]');\n    const typeText = listingElement.querySelector('[tentacle-listings-element=\"type\"]');\n    const yieldText = listingElement.querySelector('[tentacle-listings-element=\"yield\"]');\n    const areaText = listingElement.querySelector('[tentacle-listings-element=\"area\"]');\n\n    // Sets listing id on element - used as reference for opening listing\n    if (listingElement) listingElement.setAttribute('data-listing-id', listing.id);\n\n    if (locationText) locationText.textContent = listing.location;\n    if (typeText) typeText.textContent = this.formatType(listing.type);\n    if (yieldText && listing.yield) yieldText.textContent = this.formatYield(listing.yield);\n    if (areaText && listing.area) areaText.textContent = this.formatArea(listing.area);\n\n    return listingElement;\n  }\n\n  toggleLoader() {\n    this._parentElement.classList.toggle('listing-1_list-is-loading');\n    this._listingLoaderElement.classList.toggle('listing-1_loader-is-loading');\n    this._listingResultsElement.classList.toggle('listing-1_results-count-loading');\n  }\n\n  // Event handlers\n  addHandlerInit(handler) {\n    window.addEventListener('load', function (e) {\n      handler();\n    });\n  }\n\n  addHandlerListingId(handler) {\n    this._parentElement.addEventListener('click', function (e) {\n      const listing = e.target.closest(\"[tentacle-listings-element='item']\");\n      if (!listing) return;\n\n      handler(listing?.dataset?.listingId);\n    });\n  }\n}\n\nexport default new ListView();\n", "export class modalView {\n  _data;\n  _parentElement = document.querySelector('[tentacle-listing-element=\"list\"]');\n  _modal = this._parentElement.closest('[tentacle-listing-element=\"modal\"]');\n  _component = this._parentElement.closest('[tentacle-listing-element=\"component\"]');\n\n  render(data) {\n    if (!this._parentElement) return;\n    this.data = data;\n\n    this._populatePropMarkup(this.data);\n  }\n\n  // Opens global modal component - hiding is made with Webflow animations\n  showModal() {\n    this._modal.style.display = 'flex';\n    this._modal.style.opacity = '1';\n    this._component.style.display = 'block';\n  }\n\n  clear() {\n    this._parentElement.innerHTML = '';\n  }\n\n  _populatePropMarkup(listing) {\n    const locationEl = this._parentElement.querySelector(\n      '[tentacle-listing-element=\"location\"]'\n    ).lastChild;\n    const typeEl = this._parentElement.querySelector('[tentacle-listing-element=\"type\"]').lastChild;\n    const yieldEl = this._parentElement.querySelector(\n      '[tentacle-listing-element=\"yield\"]'\n    ).lastChild;\n    const vacancyEl = this._parentElement.querySelector(\n      '[tentacle-listing-element=\"vacancy\"]'\n    ).lastChild;\n\n    if (locationEl && listing.location) locationEl.textContent = listing.location;\n    if (typeEl && listing.type) typeEl.textContent = this.formatType(listing.type);\n    if (yieldEl && listing.yield) yieldEl.textContent = this.formatYield(listing.yield);\n    if (vacancyEl && listing.vacancy) vacancyEl.textContent = listing.vacancy;\n  }\n\n  formatType(arr) {\n    return arr.join(', ');\n  }\n\n  formatYield(arr) {\n    return `${arr[0]} - ${arr[1]}%`;\n  }\n\n  formatArea(arr) {\n    return `${arr[0]} - ${arr[1]}`;\n  }\n\n  formatFirstUppercase(str) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  }\n}\n\nexport default new modalView();\n", "export const API_URL = 'https://dev.tentacle.se/api/public-deals';\n", "import { API_URL } from './config';\n\nexport const state = {\n  listings: [],\n  resultsCount: '',\n  activeListing: '',\n};\n\nexport const fetchListings = async function () {\n  try {\n    const res = await fetch(API_URL, {\n      headers: {\n        referrer: 'https://dev.tentacle.se',\n        'Content-Type': 'application/javascript',\n      },\n    });\n    const { data } = await res.json();\n\n    data.forEach((listing) => {\n      const newListing = generateListing(listing);\n      state.listings.push(newListing);\n    });\n\n    state.resultsCount = getResultsCount(data);\n  } catch (err) {\n    console.error(err);\n  }\n};\n\nconst getResultsCount = function (data) {\n  return data.length;\n};\n\nconst generateListing = function (listing) {\n  return {\n    location: listing.county,\n    id: listing.id,\n    type: listing.property_types,\n    yield: listing.yield_range,\n    area: listing.sqm_range,\n    vacancy: listing.vacancy,\n  };\n};\n\nexport const getListing = function (id) {\n  const listing = state.listings.find((listing) => listing.id === +id);\n  if (!listing) throw new Error('\uD83D\uDCA5 Listing could not be found');\n  return listing;\n};\n", "import ListView from './listView';\nimport modalView from './modalView';\nimport * as model from './model';\n\nwindow.Webflow ||= [];\nwindow.Webflow.push(() => {\n  const controlListings = async function () {\n    try {\n      // 1) Fetch listings\n      await model.fetchListings();\n\n      // 2) Clear list\n      ListView.clear();\n\n      // 3) Render listings and update results count\n      ListView.renderListings(model.state.listings);\n      ListView.updateResultsElement(model.state.resultsCount);\n\n      // 4) Remove list loader\n      ListView.toggleLoader();\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const showListing = function (id) {\n    // 1) Get listing obj from id\n    const listing = model.getListing(id);\n\n    // 2) Render items\n    modalView.render(listing);\n\n    // 3) Show modal\n    modalView.showModal();\n  };\n\n  function init() {\n    ListView.addHandlerInit(controlListings);\n    ListView.addHandlerListingId(showListing);\n  }\n\n  init();\n});\n"],
  "mappings": "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",
  "names": ["listing"]
}
